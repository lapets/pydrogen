<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta content="all" name="robots" />
    <title>pydrogen</title>
    <link rel="shortcut icon"type="image/x-icon" href="data:image/x-icon;,"><!-- Suppress browser favicon.ico request. -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.1.0/styles/vs.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.1.0/highlight.min.js"></script>
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Open+Sans">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <style>
html, body { height:100%; margin:0; color:#000000; font-family:'Open Sans',sans-serif; }
body #content { z-index:100; min-height:100%; width:900px; margin:0 auto -90px; }
body #content #title { margin-left:-2px; padding-top:60px; padding-bottom:20px; /*text-align:center;*/ color:#326B9A; font-family:'Open Sans',sans-serif; font-size:36px; }
body #content #description { padding-bottom:40px; font-size:16px; }
body #content #sheet { margin:0 auto; padding-bottom:40px; color:#000000; background-color:white; }
body #content #sheet .section { padding-top:20px; font-family:'Open Sans',sans-serif; font-size:16px; }
body #content #sheet .section pre code { padding:10px; font-size:14px; }
body #content #sheet .section code { background-color:#F1F1F1; }
body #content #sheet .section h2 { color:#888888; font-family:'Open Sans',sans-serif; font-weight:normal; font-size:28px; }
body #content #sheet .section ul { list-style:none; padding:8px 0px 8px 0px; margin:0; }
body #content #sheet .section li { padding-left:1.5em; text-indent:-1em; }
body #content #sheet .section li:before { content:"4"; color:#888888; font-family:'Webdings'; }
body #content #sheet .section a { color:#CAAC3A; text-decoration:none; }
body #content #sheet .section a:hover { text-decoration:underline; }
body #content #footer_spacer { height:70px; }
body #footer { width:900px; height:70px; margin:0 auto; padding-top:15px; font-family:'Open Sans',sans-serif; font-size:13px; }
body #footer hr { border:0px; border-top:1px solid #DFDFDF; }
body #footer a { color:#000000; text-decoration:none; }
body #footer a:hover { text-decoration:underline; }
    </style>
    <script>
      var favIcon = "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uwC+vb0Au7u7AL6+vgW4uLh5r6+v+6+vr/m5ublazs7OAM7OzgDOzs4Azs7OAM3NzQDNzc0Azc3NAM7OzgC/v78Aubm5P7Kyst+urq7/s7OzyLq6uku+vr4Evr6+AL29vQC+vLwAwb29AMzJyADW0tIAv7y7AMG/vwC9vb0Avb29AL6+vgO3t7dMs7OzzK6urv+xsbHfurq6Qby8vADMzMwAzc3NAM3NzQDNzc0Azc3NAM3NzQDNzc0Azs7OAL+/vwC+vr4Avb29Gra2tqCvr6/9r6+v/7Ozs9O3t7d9ubm5PLy8vBG9vb0EysrKANPT0wC8vLwCv7+/DLu7uzK3t7d0s7Ozza+vr/+wsLD9t7e3nb6+vhm+vr4Au7u7AMzMzADNzc0Azc3NAM3NzQDNzc0Azc3NAM3NzQDOzs4Av7+/ALy8vAC+vr4Av7+/ALi4uDS1tbWesbGx8K+vr/+vr6//sbGx9rOzs9O3t7fBurq6wLOzs8qxsbHvr6+v/6+vr/+wsLD2tra2pb29vTTBwcEAwMDAAL29vQC7u7sAzMzMAM3NzQDNzc0Azc3NAM3NzQDNzc0Azc3NAM7OzgC/v78AvLy8AL6+vgC+vr4Au7u7AL29vQC8vLwSurq6Uba2tpCzs7PAsbGx5bCwsPawsLD6sLCw7bOzs822trafubm5X7q6uhm/v78AwcHBAMDAwAC/v78Avb29ALu7uwDMzMwAzc3NAM3NzQDNzc0A/h////gIH//4AAP/8Afw//AH/D/wB/8f8A//z+Af/+fH///jz/gf85/gB/mfwAP5n4AB/T+AAfw/AAH8PwAA/D8AAPw/AAD8PwAB/D+AAfy/gAH9n8AD+Z/gB/nP+B/zz///8+f//+fz///P+f//n/x//j/+H/h//4AB///wD/8=";
      var docHead = document.getElementsByTagName('head')[0];
      var newLink = document.createElement('link');
      newLink.rel = 'shortcut icon';
      newLink.type = 'image/x-icon';
      newLink.href = 'data:image/png;base64,'+favIcon;
      docHead.appendChild(newLink);
      hljs.initHighlightingOnLoad();
    </script>
    <base target="_parent">
  </head>
  <body onload="$('code').each(function(){ $(this).html(($(this).html().trim()));});">
    <div id="content">
      <div id="title">pydrogen</div>
      <div id="description">
        Python library for building embedded languages within Python that have alternative operational semantics or abstract interpretations.
      </div>
      <div id="sheet">
        <div class="section"><h2>Purpose</h2>
          This library allows programmers to free the building blocks that constitute Python syntax from the default Python semantics. It is designed to allow programmers to define quickly and to use immediately one or more alternative abstract interpretation or operational semantics for Python.
        </div>
        <div class="section"><h2>Repository and Package</h2>
          The <a href="http://github.com/lapets/pydrogen">official repository</a> is maintained on GitHub. The package is also <a href="http://pypi.python.org/pypi/Pydrogen">available on PyPI</a>.
          <pre><code>
pip install pydrogen
          </code></pre>
          Note that this library is only compatible (i.e., tested) with Python 3. It depends on the <a href="http://docs.python.org/3/library/ast.html"><code>ast</code></a> and <a href="http://docs.python.org/3/library/inspect.html"><code>inspect</code></a> modules.
        </div>
        <div class="section"><h2>Examples</h2>
          A user would normally import the module in the usual way.
          <pre><code class="py">
import pydrogen
          </code></pre>
          To create an alternative interpretation for Python syntax, it is only necessary to extend the <code>Pydrogen</code> class and to provide definitions for those functions that handle the abstract syntax nodes that are of interest. The complete Python abstract syntax can be found in the documentation of the Python <a href="http://docs.python.org/3/library/ast.html"><code>ast</code> module</a>.
          <br/><br/>
          Below, we define a simple type checking algorithm.
          <pre><code class="py">
class Ty(pydrogen.Pydrogen):
    def Statements(self, ss): return ss.post()[-1] # Last statement.
    def Module(self, ss): return ss.post()
    def FunctionDef(self, ss): return ss.post()
    def Return(self, e): return e.post()

    def True_(self): return 'Bool'
    def False_(self): return 'Bool'
    def BoolOp(self, es): return 'Bool'if frozenset(es.post()) == {'Bool'} else 'Error'
    def Not(self, e): return 'Bool' if e.post() == 'Bool' else 'Error'

    def Num(self, n): return 'Int'
    def Add(self, e1, e2): return 'Int' if e1.post() == 'Int' and e2.post() == 'Int' else 'Error'
    def Sub(self, e1, e2): return 'Int' if e1.post() == 'Int' and e2.post() == 'Int' else 'Error'
    def Mult(self, e1, e2): return 'Int' if e1.post() == 'Int' and e2.post() == 'Int' else 'Error'
    def USub(self, e): return 'Int' if e.post() == 'Int' else 'Error'
          </code></pre>
          Given the above definition, we can use <code>@Ty</code> as a decorator on any function. This will make it possible to query that function's type at a later point using the name of the class extension defined above.
          <pre><code class="py">
@Ty
def correct():
    return -1 + 2 - 3 * 4

print("The type of 'correct' is " + str(correct.Ty) + ".")

@Ty
def incorrect():
    return 123 and False

print("The type of 'incorrect' is " + str(incorrect.Ty) + ".")
          </code></pre>
          The example below illustrates how multiple interpretations can be used together by defining a running time approximation algorithm for a very small subset of Python.
          <pre><code class="py">
class Size(pydrogen.Typical):
    def List(self, elts): return len(elts.post())
    def Num(self, n): return 1

class Time(pydrogen.Typical):
    def Statements(self, ss): return sum(ss.post())
    def Assign(self, targets, e): return 1 + e.post()
    def For(self, target, itr, ss, orelse): return Size(itr.pre()) * (1 + ss.post())
    def BoolOp(self, es): return 1 + sum(es.post())
    def BinOp(self, e1, e2): return 1 + e1.post() + e2.post()
    def Call(self, func, args): return 1 + sum(args.post())
    def Num(self, n): return 0
    def NameConstant(self): return 0

@Time
def example():
    for x in [1,2,3,4,5,6,7]:
        print(True and False)
        print(123 + 456)

print("The approximate running time of example is " + str(example.Time) + ".")
          </code></pre>
          The example below illustrates how the optional context parameter can be used to create environments. Note that because only the statement handlers return <code>(env, ty)</code> tuples, we only need to handle such tuple results when they appear (while not worrying about them when dealing with results from expression handlers, which do not return an environment).
          <pre><code class="py">
class Ty2(pydrogen.Typical):
    def Statements(self, ss, env):
        (tys, env) = ss.post(env)
        return tys[-1]
    def Assign(self, targets, value, env):
        var = targets.pre()[0].id # Only single variable assignment.
        envNew = env.copy()
        envNew[var] = value.post(env)
        return ('Void', envNew)
    def Name(self, x, env):
        return env[x.pre()] if x.pre() in env else 'Error'
    def Num(self, n, env):
        return 'Int'
    def Add(self, e1, e2, env):
        return 'Int' if {e1.post(env), e2.post(env)} == {'Int'} else 'Error'

@Ty2
def example2():
    y = 0
    x = 1 + 2 + 3
    return x + y

print("The type of example2() is " + str(example2.Ty2) + ".")
          </code></pre>
        </div>
      </div><!-- /#sheet -->
      <div id="footer_spacer"></div>
    </div><!-- /#content -->
    <div id="footer">
      <hr/>
      <a href="http://pypi.python.org/pypi/Pydrogen">Package</a>
      &nbsp;&nbsp;&nbsp;&nbsp;
      <a href="http://www.github.com/lapets/pydrogen">Repository</a>
      &nbsp;&nbsp;&nbsp;&nbsp;
      <a href="mailto:a@lapets.io">Contact</a>
    </div><!-- /#footer -->
  </body>
</html>